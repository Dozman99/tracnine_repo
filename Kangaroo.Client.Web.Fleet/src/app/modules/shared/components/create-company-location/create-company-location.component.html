<div class='text-center mt-2 w-100 me-5 mt-5'>

    <h2 class='fw-bold pt-5'>{{data.action}} Company Location</h2>
    <mat-stepper [linear]="true" #stepper>
        <mat-step label="Location" [stepControl]="companyLocationForm">
            <form [formGroup]="companyLocationForm">
                <div class="row">
                    <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Name</mat-label>
                          <input type="text" matInput required formControlName='name'>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Postal Code</mat-label>
                          <input type="text" matInput required formControlName='postalCode'>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6 mb-3">
                        <ng-multiselect-dropdown [ngModelOptions]="{standalone: true}" [(ngModel)]="existingCountry" [placeholder]="'Select Country'" [settings]="dropdownSettings"
                        [data]="listOfCountries" name='country' (onSelect)="onCountrySelect($event)"
                        (onDeSelect)="onCountryDeselect($event)">
                        </ng-multiselect-dropdown>
                      <!-- <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Acronym</mat-label>
                          <input type="text" matInput required formControlName='acronym'>
                        </mat-form-field> -->
                    </div>
                    <div class="col-12 col-md-6 mb-3">
                        <ng-multiselect-dropdown [disabled]="!listOfStates.length" [ngModelOptions]="{standalone: true}" [(ngModel)]="existingState" [placeholder]="'Select State'" [settings]="dropdownSettings"
                        [data]="listOfStates" name='state' (onSelect)="onStateSelect($event)"
                        (onDeSelect)="onStateDeselect($event)">
                        </ng-multiselect-dropdown>
                    </div>
                    <!-- <div class="col-12 col-md-6 mb-3">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>City</mat-label>
                          <input type="text" matInput required formControlName='cityId'>
                        </mat-form-field>
                    </div> -->
                    <div class="col-12 col-md-6 mb-3">
                        <ng-multiselect-dropdown [disabled]="!listOfCity.length" [ngModelOptions]="{standalone: true}" [(ngModel)]="existingCity" [placeholder]="'Select City'" [settings]="dropdownSettings"
                        [data]="listOfCity" name='city' (onSelect)="onCitySelect($event)"
                        (onDeSelect)="onCityDeselect($event)">
                        </ng-multiselect-dropdown>
                    </div>
                    <div class="col-12 col-md-6 mb-3">
                        <ng-multiselect-dropdown [disabled]="!listOfLga.length" [ngModelOptions]="{standalone: true}" [(ngModel)]="existingLga" [placeholder]="'Select LGA'" [settings]="dropdownSettings"
                        [data]="listOfLga" name='lga' (onSelect)="onLgaSelect($event)"
                        (onDeSelect)="onLgaDeselect($event)">
                        </ng-multiselect-dropdown>
                    </div>
                    <div class="col-12">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Address 1</mat-label>
                          <textarea type="text" matInput required formControlName='address1'></textarea>
                        </mat-form-field>
                    </div>
                    <div class="col-12">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Address 2</mat-label>
                          <textarea type="text" matInput required formControlName='address2'></textarea>
                        </mat-form-field>
                    </div>
                    <div class="col-12">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Narration</mat-label>
                          <textarea type="text" class="w-100" matInput required formControlName='narration'></textarea>
                        </mat-form-field>
                    </div>
                </div>
                  
                <div class="text-end">
                    <button mat-flat-button class='mat-button-primary mt-2 px-5' matStepperNext>Next</button>
                  </div>
      
            </form>
        </mat-step>
        <mat-step label="Contact" [stepControl]="companyLocationContactForm">
            <form [formGroup]="companyLocationContactForm">
                <div class="row">
                    <!-- <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Company Name</mat-label>
                          <input type="text" matInput required formControlName='companyName'>
                        </mat-form-field>
                    </div> -->
                    <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>First Name</mat-label>
                          <input type="text" matInput required formControlName='firstName'>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Last Name</mat-label>
                          <input type="text" matInput required formControlName='surname'>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Email</mat-label>
                          <input type="text" matInput required formControlName='email' [pattern]="emailRegex">
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Alternate Email</mat-label>
                          <input type="text" matInput formControlName='alternateEmail'>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Phone Number 1</mat-label>
                          <input type="number" matInput required formControlName='phone1'>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6">
                      <mat-form-field appearance="outline" class='mt-2 w-100'>
                          <mat-label>Phone Number 2</mat-label>
                          <input type="number" matInput formControlName='phone2'>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6">
                        <mat-checkbox class="example-margin" ormControlName='isPrimary'>Is this a primary contact?</mat-checkbox>
                        
                    </div>
                </div>

                <div class='text-center mt-4'>
                    <label for="file" class='pointer rounded p-3 border border-2'>
                        <div>
                            <img src="assets/images/folder.svg" alt="">
                        </div>
                        <div>
                            <div class='mat-text-grey'>Upload Documents</div>
                            <div class='mat-text-primary'>PNG, JPEG</div>
                        </div>
                        <div class="mt-4 text-center p-3 d-flex align-items-center justify-content-center fw-bold" [ngClass]="{'border rounded': uploadedPhoto}">
                            {{uploadedPhoto?.name}}
                        </div>
                    </label>
                    <input id='file' #logoInput type="file" hidden (change)="uploadFile($event)" accept=".png, .jpg, .jpeg">
                    <div class="text-center mt-3">
                        <!-- <button mat-flat-button class="mat-button-primary" (click)='savePhotoFile()' [disabled]="!uploadedPhoto">
                            Upload Logo
                            <div class="text-center ms-3 mat-text-secondary d-inline-block" *ngIf="loading">
                                <div class="spinner-border spinner-border-sm" role="status">
                                  <span class="visually-hidden">Loading...</span>
                                </div>
                              </div>
                            </button> -->
                    </div>
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <button mat-flat-button class='mat-button-secondary mt-2 px-5' matStepperPrevious>Back</button>
                    <button *ngIf="data.action === 'Add'" mat-flat-button class='mat-button-primary mt-2 px-5' (click)="saveCompanyLocation()" type="button" [disabled]='!uploadedPhoto || companyLocationContactForm.invalid || companyLocationForm.invalid || !selectedCountry || !selectedState || !selectedLga'>
                        Create Company Location<div class="text-center ms-3 mat-text-secondary d-inline-block" *ngIf="loading">
                            <div class="spinner-border spinner-border-sm" role="status">
                              <span class="visually-hidden">Loading...</span>
                            </div>
                          </div></button>
                    <button *ngIf="data.action === 'Edit'" mat-flat-button class='mat-button-primary mt-2 px-5' (click)="saveCompanyLocation()" type="button" [disabled]='companyLocationContactForm.invalid || companyLocationForm.invalid || !selectedCountry || !selectedState || !selectedLga'>
                        Update Company Location<div class="text-center ms-3 mat-text-secondary d-inline-block" *ngIf="loading">
                            <div class="spinner-border spinner-border-sm" role="status">
                              <span class="visually-hidden">Loading...</span>
                            </div>
                          </div></button>
                  </div>
            </form>
        </mat-step>
    </mat-stepper>
      
  </div>